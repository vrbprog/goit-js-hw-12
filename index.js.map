{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nfunction createCardHTML(image) {\n    const cardHTML = `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img\n        class=\"gallery-image\"\n        src=\"${image.webformatURL}\"\n        title=\"${image.tags}\"\n        />\n    </a>\n    <div class=\"properties\">\n        <div class=\"property\">\n            <p class=\"nameProp\">Likes</p>\n            <p>${image.likes}</p>\n        </div>\n        <div class=\"property\">\n            <p class=\"nameProp\">Views</p>\n            <p>${image.views}</p>\n        </div>\n        <div class=\"property\">\n            <p class=\"nameProp\">Comments</p>\n            <p>${image.comments}</p>\n        </div>\n        <div class=\"property\">\n            <p class=\"nameProp\">Downloads</p>\n            <p>${image.downloads}</p>\n        </div>\n    </div>\n    </li>`;\n\n    return cardHTML;\n}\n            \nexport default function createGalleryHTML(images) {\n    let strGallery = '';\n    for (const image of images.hits) {\n      strGallery += createCardHTML(image);\n    }\n    return strGallery;\n}\n\n            ","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '46844494-ff9f555a2e638e0a9d57299e3';\n\nconst getPixabayImages = async (request, numPage = 1) => {\n\n  // return await axios.get('https://pixabay.com/api',\n  //   {\n  //      headers: {\n  //      'Access-Control-Allow-Origin' : '*',\n  //      'Access-Control-Allow-Methods':'GET,PUT,POST,DELETE,PATCH,OPTIONS'\n  //    },\n  //     params: {\n  //       key: API_KEY,\n  //       q: `${request}`,\n  //       image_type: 'photo',\n  //       orientation: 'horizontal',\n  //       per_page: 15,\n  //       page: `${numPage}`,\n  //       safesearch: true\n  //     }\n  // }\n  // )\n\n  return await axios({\n    method: 'get',\n    url: BASE_URL +\n      `/?key=` +\n      API_KEY +\n      `&q=${request}` +\n      `&image_type=photo` +\n      `&orientation=horizontal` +\n      `&per_page=15` +\n      `&page=${numPage}` +\n      `&safesearch=true`\n  });\n  \n};  \n\nexport default getPixabayImages;","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport createGalleryHTML from './js/render-functions';\nimport getPixabayImages from './js/pixabay-api';\n\nconst HIDE = 'none';\nconst SHOW = 'block';\n\n\niziToast.settings({\n  timeout: 1000,\n  resetOnHover: true,\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n  position: 'topCenter',\n});\n\nconst simpleGallery = new SimpleLightbox('.gallery-item a', {\n  captionType: 'alt',\n  captionDelay: 250,\n});\nsimpleGallery.on('show.simplelightbox');\nconst gallery = document.querySelector('ul.gallery');\nlet lastRequest = '';\nlet currentRequest = '';\nlet numberPage = 1;\n\nconst submit = document.querySelector('.search');\nsubmit.addEventListener('submit', event => {\n  event.preventDefault();\n  currentRequest = event.target.search.value.trim();\n  if (currentRequest != '') {\n\n    numberPage = 1;\n    gallery.innerHTML = '';\n\n    lastRequest = currentRequest;\n    changeMoreState(HIDE);\n    changeLoadingState(SHOW);\n    getPixabayImages(lastRequest, numberPage)\n      .then(response => validateResponse(response))\n      .then(images => showGallery(images))\n      .catch(error => console.log(error))\n      .finally(() => changeLoadingState(HIDE));\n  } else {\n    gallery.innerHTML = '';\n    changeMoreState(HIDE);\n    iziToast.error({ title: 'Error', message: 'Empty request' });\n  }\n});\n\nconst more_submit = document.querySelector('.but_more');\nmore_submit.addEventListener('click', event => {\n    numberPage++;\n    changeMoreState(HIDE);\n    changeLoadingState(SHOW);\n    getPixabayImages(lastRequest, numberPage)\n      .then(response => validateResponse(response))\n      .then(images => showGallery(images))\n      .catch(error => console.log(error))\n      .finally(() => changeLoadingState(HIDE));\n});\n\nconst validateResponse = response => {\n  if (response.status != 200) {\n    throw new Error(response.status);\n  }\n  return response.data;\n};\n\nconst showGallery = images => {\n  if (images.totalHits != 0) {\n    gallery.insertAdjacentHTML('beforeend', createGalleryHTML(images));\n    simpleGallery.refresh();\n    if (numberPage > 1) {\n        window.scrollBy({\n        top: 464,\n        left: 0,\n        behavior: \"smooth\",\n    });\n    }\n\n    if ((images.totalHits - numberPage * 15) > 0) {\n      changeMoreState(SHOW);\n    }\n    else {\n      iziToast.info({ title: 'Info', position: 'center', message: \"We're sorry, but you've reached the end of search results.\" });\n    }\n  } else {\n    iziToast.warning({ title: 'Warning', message: 'Images dont fined!' });\n  }\n};\n\nconst changeLoadingState = state =>\n  (document.querySelector('.loader').style.display = state);\n\nconst changeMoreState = state =>\n  (document.querySelector('.but_more').style.display = state);\n\n"],"names":["createCardHTML","image","createGalleryHTML","images","strGallery","BASE_URL","API_KEY","getPixabayImages","request","numPage","axios","HIDE","SHOW","iziToast","simpleGallery","SimpleLightbox","gallery","lastRequest","currentRequest","numberPage","submit","event","changeMoreState","changeLoadingState","response","validateResponse","showGallery","error","more_submit","state"],"mappings":"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"}